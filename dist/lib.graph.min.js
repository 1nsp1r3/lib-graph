!function(f){"object"==typeof exports&&"undefined"!=typeof module?module.exports=f():"function"==typeof define&&define.amd?define([],f):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).LibGraph=f()}(function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);throw(f=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",f}c=n[i]={exports:{}},e[i][0].call(c.exports,function(r){return o(e[i][1][r]||r)},c,c.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){"use strict";var Helpers,BarChart;Math.log2=Math.log2||function(x){return Math.log(x)/Math.LN2},Math.log10=Math.log10||function(x){return Math.log(x)/Math.LN10},Helpers={avg:function(arr){for(var v=0,index=0;index<arr.length;++index)v+=arr[index];return v/arr.length},min:function(arr){if(0===arr.length)return 0;for(var v=arr[0],index=1;index<arr.length;++index){var v2=arr[index];(v2=Array.isArray(v2)?Helpers.avg(v2):v2)<v&&(v=v2)}return Math.max(0,v)},max:function(arr){for(var v=0,index=0;index<arr.length;++index){var v2=arr[index];v<(v2=Array.isArray(v2)?Helpers.avg(v2):v2)&&(v=v2)}return Math.max(0,v)},upperMax:function(arr){for(var v=0,index=0;index<arr.length;++index){var v2=arr[index];v<(v2=Array.isArray(v2)?Helpers.max(v2):v2)&&(v=v2)}return Math.max(0,v)},lowerMin:function(arr){if(0===arr.length)return 0;var v=arr[0]||1/0;Array.isArray(v)&&(v=Helpers.lowerMin(v));for(var index=1;index<arr.length;++index){var v2=arr[index];null!=v2&&(v2=Array.isArray(v2)?Helpers.lowerMin(v2):v2)<v&&(v=v2)}return!isNaN(v)&&isFinite(v)||(v=0),Math.max(0,v)},niceNumbers:function(range,round){var exponent=Math.floor(Math.log10(range)),range=range/Math.pow(10,exponent),round=round?range<1.5?1:range<3?2:range<7?5:10:range<=1?1:range<=2?2:range<=5?5:10;return round*Math.pow(10,exponent)},getLinearTicks:function(min,max,maxTicks){var range=Helpers.niceNumbers(max-min,!1),range=Helpers.niceNumbers(range/(maxTicks-1),!0);return[Math.floor(min/range)*range,Math.ceil(max/range)*range,range]},getFont:function(options){return options.style=options.style||"normal",options.variant=options.variant||"normal",options.weight=options.weight||"lighter",options.size=options.size||"12",options.family=options.family||"Arial",[options.style,options.variant,options.weight,options.size+"px",options.family].join(" ")},getAxisRatio:function(min,max,value){return(value-min)/(max-min)}},BarChart=function(){function BarChart(ctx,options){for(var key in this.mouseListeners=[],this.currentHint=null,this.fillRegions=[],this.options={font:"Helvetica",fontWeight:"normal",fontSizeTitle:24,fontSizeAxes:20,fontSizeTicks:18,fontSizeLabels:18,fontDataTags:18,fontSizeLegend:18,fontSizeHint:18,paddingPercentBars:.1,paddingPercentTicks:.15,paddingPixelsVertical:10,paddingPixelsHorizontal:10,paddingPixelsTicks:10,maxWidthBars:0,fillColorBackground:"rgb(255, 255, 255)",strokeColorBars:"rgb(0, 0, 0)",fillColorBars:"rgba(180, 180, 180, 0.25)",scaleStyle:"linear",barStyle:"none",stackedBarPadding:3,defaultMaxTick:0,pixelsLegendSquare:10,radiusDot:5,fillColorLegend:"rgb(230, 230, 230)",tickFormatter:null,tickFormatterMeasure:null,fillRegion:"normal"},options=options||{},this.options)options.hasOwnProperty(key)&&(this.options[key]=options[key]);this.ctx=ctx,this.content={},this.labelPositions={}}return BarChart.prototype.update=function(content){if("object"!=typeof content)throw new Error("Collections must be objects.");if(!content.hasOwnProperty("labels")||!content.hasOwnProperty("data"))throw new Error("Collection must specify labels and data.");if(!Array.isArray(content.labels)||!Array.isArray(content.data))throw new Error("Labels and data must be arrays.");if(content.labels.length!==content.data.length)throw new Error("Labels and data length must match.");content._data_standard_deviation=[],content._data_standard_error=[];for(var i=0;i<content.data.length;++i){var isArr=Array.isArray(content.data[i]);if("log2"===this.options.scaleStyle)if(isArr)for(var i3=0;i3<content.data[i].length;++i3)content.data[i][i3]=Math.log2(content.data[i][i3]);else content.data[i]=Math.log2(content.data[i]);if(isArr){for(var mean=Helpers.avg(content.data[i]),acc=0,i2=0;i2<content.data[i].length;++i2)acc+=Math.pow(mean-content.data[i][i2],2);acc=Math.sqrt(acc/(content.data[i].length-1)),content._data_standard_deviation.push(acc),content._data_standard_error.push(acc/Math.sqrt(content.data[i].length))}else content._data_standard_deviation.push(0),content._data_standard_error.push(0)}this.content=content,this.redraw()},BarChart.prototype.redraw=function(){setTimeout(function(){this._draw()}.bind(this),0)},BarChart.prototype.mousemove=function(x,y){for(var ch,res=null,index=0;index<this.mouseListeners.length&&!(res=this.mouseListeners[index](x,y));++index);res&&"object"==typeof res&&res.hasOwnProperty("index")&&res.hasOwnProperty("drawIndex")?null!=(ch=this.currentHint)&&ch.index==res.index&&ch.drawIndex==res.drawIndex||(this.currentHint=res,this.redraw()):null!==this.currentHint&&(this.currentHint=null,this.redraw())},BarChart.prototype._draw=function(){var labelPositions={},options=(this.mouseListeners=[],this.fillRegions=[],this.options),ctx=this.ctx,content=this.content,width=ctx.canvas.width,height=ctx.canvas.height,remainingWidth=(ctx.clearRect(0,0,width,height),ctx.translate(-.5,-.5),width),remainingHeight=height,topYPadding=(null!=options.fillColorBackground&&(ctx.save(),ctx.fillStyle=options.fillColorBackground,ctx.fillRect(0,0,width,height),ctx.restore()),options.paddingPixelsHorizontal),leftXPadding=(remainingHeight-=options.paddingPixelsHorizontal,ctx.fillStyle="rgb(0, 0, 0)",null!=content.title&&(ctx.save(),ctx.font=Helpers.getFont({weight:options.fontWeight,size:options.fontSizeTitle,family:options.font}),ctx.textAlign="center",ctx.fillText(content.title,width/2,topYPadding+options.fontSizeTitle),ctx.restore(),remainingHeight-=1.25*options.fontSizeTitle,topYPadding+=1.25*options.fontSizeTitle),options.paddingPixelsVertical),leftXDrawYLabel=(remainingWidth-=options.paddingPixelsVertical,null);if(null!=content.yAxis&&(leftXDrawYLabel=leftXPadding+.5*options.fontSizeAxes,remainingWidth-=1.25*options.fontSizeAxes,leftXPadding+=1.25*options.fontSizeAxes),ctx.save(),ctx.font=Helpers.getFont({weight:options.fontWeight,size:options.fontSizeTicks,family:options.font}),"stacked"===options.barStyle)for(var doB,maxChartValue=0,minChartValue=1/0,cmIndex=0;cmIndex<content.data.length;++cmIndex)if(Array.isArray(doB=content.data[cmIndex])){for(var tempSum=0,ii2=0;ii2<doB.length;++ii2)tempSum+=doB[ii2];maxChartValue=Math.max(maxChartValue,tempSum),minChartValue=Math.min(minChartValue,tempSum)}else maxChartValue=Math.max(maxChartValue,content.data[cmIndex]),minChartValue=Math.min(minChartValue,content.data[cmIndex]);else maxChartValue=Helpers.upperMax(content.data),minChartValue=Helpers.lowerMin(content.data);if(0===options.scaleStyle.indexOf("adaptive")?-1!==options.scaleStyle.indexOf(":")&&(minChartValue*=floater=parseFloat(options.scaleStyle.split(/[:]/)[1]),maxChartValue*=1+(1-floater)/2):minChartValue=0,options.defaultMaxTick>maxChartValue&&(maxChartValue=options.defaultMaxTick),null!=content.bars&&Array.isArray(content.bars))for(index=0;index<content.bars.length;++index){var cbv=content.bars[index].value;isNaN(cbv)||(maxChartValue=Math.max(maxChartValue,cbv),minChartValue=Math.min(minChartValue,cbv))}var floater="log2"==options.scaleStyle?Math.ceil(Math.pow(2,maxChartValue)):Math.ceil(maxChartValue)+".00";null!=options.tickFormatterMeasure&&(floater=options.tickFormatterMeasure),floater=ctx.measureText(floater).width,remainingWidth-=floater=Math.ceil(floater)+options.paddingPixelsTicks,leftXPadding+=floater,ctx.restore(),options.paddingPixelsVertical;if(remainingWidth-=options.paddingPixelsVertical,null!=content.legend&&Array.isArray(content.legend)){ctx.save(),ctx.font=Helpers.getFont({weight:options.fontWeight,size:options.fontSizeLegend,family:options.font});for(var maxLWidth=0,lIndex=0;lIndex<content.legend.length;++lIndex)maxLWidth=Math.max(maxLWidth,ctx.measureText(content.legend[lIndex].label).width);maxLWidth=Math.ceil(maxLWidth),maxLWidth+=options.pixelsLegendSquare+8;var bSX,bSY,legendEntriesPerLine=Math.floor((remainingWidth-2*options.paddingPixelsHorizontal)/maxLWidth),floater=Math.ceil(content.legend.length/legendEntriesPerLine)*options.fontSizeLegend*1.5;for(remainingHeight-=floater,bottomYPadding+=floater,ctx.strokeStyle="rgb(0, 0, 0)",ctx.fillStyle=options.fillColorLegend,ctx.beginPath(),ctx.moveTo(bSX=leftXPadding,bSY=topYPadding+remainingHeight),ctx.lineTo(bSX+remainingWidth,bSY),ctx.lineTo(bSX+remainingWidth,bSY+floater),ctx.lineTo(bSX,bSY+floater),ctx.lineTo(bSX,bSY),ctx.stroke(),ctx.fill(),lIndex=0;lIndex<content.legend.length;++lIndex){var legLine=Math.floor(lIndex/legendEntriesPerLine),legCol=lIndex%legendEntriesPerLine,legCol=(ctx.fillStyle=content.legend[lIndex].color,bSX+legCol*maxLWidth+3),legLine=bSY+legLine*options.fontSizeLegend*1.5+.5*options.fontSizeLegend;ctx.beginPath(),ctx.moveTo(legCol,legLine),ctx.lineTo(legCol+options.pixelsLegendSquare,legLine),ctx.lineTo(legCol+options.pixelsLegendSquare,legLine+options.pixelsLegendSquare),ctx.lineTo(legCol,legLine+options.pixelsLegendSquare),ctx.lineTo(legCol,legLine),ctx.fill(),ctx.stroke(),ctx.textAlign="left",ctx.fillStyle="rgb(0, 0, 0)",ctx.fillText(content.legend[lIndex].label,legCol+3+options.pixelsLegendSquare,legLine+.5*options.fontSizeLegend)}ctx.restore()}var bottomYPadding=options.paddingPixelsHorizontal,widthPerBar=(remainingHeight-=options.paddingPixelsHorizontal,null!=content.xAxis&&(ctx.save(),ctx.font=Helpers.getFont({weight:options.fontWeight,size:options.fontSizeAxes,family:options.font}),ctx.fillStyle="rgb(0, 0, 0)",ctx.textAlign="center",ctx.fillText(content.xAxis,width-remainingWidth+remainingWidth/2,topYPadding+remainingHeight-bottomYPadding),remainingHeight-=1.5*options.fontSizeAxes,bottomYPadding+=1.5*options.fontSizeAxes,ctx.restore()),remainingWidth/content.data.length);if(null!=content.topLabels){for(ctx.save(),ctx.textAlign="center",ctx.font=Helpers.getFont({weight:options.fontWeight,size:options.fontSizeLabels,family:options.font}),remainingHeight-=1.5*options.fontSizeLabels,topYPadding+=1.5*options.fontSizeLabels,index=0;index<content.topLabels.length;++index)ctx.fillText(content.topLabels[index],leftXPadding+index*widthPerBar+widthPerBar/2,topYPadding-options.fontSizeLabels/2);ctx.restore()}ctx.save();var reqWidth=0;if(null!=content.dataTags){ctx.font=Helpers.getFont({weight:options.fontWeight,size:options.fontDataTags,family:options.font});for(var dataTags=content.dataTags,index=0;index<dataTags.length;++index)if(Array.isArray(dataTags[index]))for(var index2=0;index2<dataTags[index].length;++index2)reqWidth=Math.max(reqWidth,Math.ceil(ctx.measureText(dataTags[index][index2]).width+5));else reqWidth=Math.max(reqWidth,Math.ceil(ctx.measureText(dataTags[index]).width+5))}ctx.font=Helpers.getFont({weight:options.fontWeight,size:options.fontSizeLabels,family:options.font});var computedBarPadding=Math.floor(widthPerBar*options.paddingPercentBars/2),floater=widthPerBar-2*computedBarPadding,maxTextWidth=(floater<reqWidth?(computedBarPadding-=Math.ceil((reqWidth-floater)/2),computedBarPadding=Math.max(0,computedBarPadding)):0<options.maxWidthBars&&floater>options.maxWidthBars&&(computedBarPadding=Math.floor((widthPerBar-options.maxWidthBars)/2)),0),maxTextStackSize=1;for(index=0;index<content.labels.length;++index){var tLabel=content.labels[index];if(Array.isArray(tLabel))for(maxTextStackSize=Math.max(maxTextStackSize,tLabel.length),index2=0;index2<tLabel.length;++index2)maxTextWidth=Math.max(maxTextWidth,ctx.measureText(tLabel[index2]).width);else maxTextWidth=Math.max(maxTextWidth,ctx.measureText(tLabel).width)}var xLabelsRotated=!1,lastLabelY=(widthPerBar-computedBarPadding<maxTextWidth?(ctx.textAlign="right",ctx.rotate(1.5*Math.PI),xLabelsRotated=!0):ctx.textAlign="center",-options.fontSizeLabels);for(index=0;index<content.labels.length;++index){var cLabel=content.labels[index],x=leftXPadding+index*widthPerBar+widthPerBar/2,y=topYPadding+remainingHeight-options.fontSizeLabels/2;if(xLabelsRotated){if((y=[x,x=-(y=topYPadding+remainingHeight-maxTextWidth+5)][0])<lastLabelY+options.fontSizeLabels)continue;lastLabelY=y}var yUp=options.fontSizeLabels*(maxTextStackSize-1);if(Array.isArray(cLabel))for(xLabelsRotated&&(yUp=options.fontSizeLabels*(cLabel.length-1.5),yUp/=2),index2=0;index2<cLabel.length;++index2)ctx.fillText(cLabel[index2],x,y-yUp),yUp-=options.fontSizeLabels;else xLabelsRotated&&(yUp=.25*-options.fontSizeLabels),ctx.fillText(cLabel,x,y-yUp)}xLabelsRotated?(remainingHeight-=maxTextWidth+5,bottomYPadding+=maxTextWidth+5):(floater=options.fontSizeLabels*maxTextStackSize,remainingHeight-=floater+=.5*options.fontSizeLabels,bottomYPadding+=floater),ctx.restore();var boundX1=leftXPadding,boundX2=leftXPadding+remainingWidth,boundY1=topYPadding,boundY2=topYPadding+remainingHeight;for(index=0;index<content.labels.length;++index)labelPositions[index]={xStart:leftXPadding+index*widthPerBar,xEnd:leftXPadding+(1+index)*widthPerBar,yStart:boundY1,yEnd:boundY2};ctx.save(),ctx.strokeStyle="rgb(0, 0, 0)",ctx.beginPath(),null!=content.topLabels?(ctx.moveTo(boundX2,boundY1),ctx.lineTo(boundX1,boundY1)):ctx.moveTo(boundX1,boundY1),ctx.lineTo(boundX1,boundY2),ctx.lineTo(boundX2,boundY2),null!=content.topLabels&&ctx.lineTo(leftXPadding+remainingWidth,topYPadding),ctx.stroke(),ctx.restore(),null!=content.topLabel&&(ctx.save(),ctx.textAlign="right",ctx.font=Helpers.getFont({weight:options.fontWeight,size:options.fontSizeLabels,family:options.font}),ctx.fillText(content.topLabel,leftXPadding-3,topYPadding-options.fontSizeLabels/2),ctx.restore()),null!=content.yAxis&&(ctx.save(),ctx.rotate(1.5*Math.PI),ctx.font=Helpers.getFont({weight:options.fontWeight,size:options.fontSizeAxes,family:options.font}),ctx.fillStyle="rgb(0, 0, 0)",ctx.textAlign="center",ctx.fillText(content.yAxis,-(topYPadding+remainingHeight/2),leftXDrawYLabel),ctx.restore()),ctx.save(),ctx.fillStyle="rgb(0, 0, 0)",ctx.strokeStyle="rgba(0, 0, 0, 0.20)",ctx.font=Helpers.getFont({weight:options.fontWeight,size:options.fontSizeTicks,family:options.font}),ctx.textAlign="right";for(var tickMeta=Helpers.getLinearTicks(0,maxChartValue,Math.max(2,remainingHeight/(options.fontSizeTicks*(1+options.paddingPercentTicks)))),floater=maxChartValue/options.fontSizeTicks,ticks=(maxChartValue=tickMeta[1],maxChartValue+=1<maxChartValue?Math.ceil(floater):floater,[]);tickMeta[0]<=tickMeta[1];)ticks.push(tickMeta[0]),tickMeta[0]+=tickMeta[2];for(index=0;index<ticks.length;++index){var tickHeight=Math.round(remainingHeight*Helpers.getAxisRatio(minChartValue,maxChartValue,ticks[index]));tickHeight<0||("log2"==options.scaleStyle&&0!==ticks[index]?ticks[index]=Math.round(Math.pow(2,ticks[index])):ticks[index]=Math.floor(100*ticks[index])/100,null!=options.tickFormatter&&"function"==typeof options.tickFormatter?ctx.fillText(options.tickFormatter(ticks[index]).toString(),leftXPadding-options.paddingPixelsTicks,topYPadding+remainingHeight-tickHeight):ctx.fillText(ticks[index].toString(),leftXPadding-options.paddingPixelsTicks,topYPadding+remainingHeight-tickHeight),0!=index&&(ctx.beginPath(),ctx.moveTo(leftXPadding,topYPadding+remainingHeight-tickHeight),ctx.lineTo(leftXPadding+remainingWidth,topYPadding+remainingHeight-tickHeight),ctx.stroke()))}if(ctx.restore(),null!=content.bars&&Array.isArray(content.bars)){for(ctx.save(),index=0;index<content.bars.length;++index){var renderBarY,cBar=content.bars[index];cBar.value>maxChartValue||(renderBarY=topYPadding+remainingHeight-Math.round(remainingHeight*Helpers.getAxisRatio(minChartValue,maxChartValue,cBar.value)),ctx.strokeStyle=cBar.style,ctx.fillStyle=cBar.style,ctx.beginPath(),ctx.moveTo(boundX1,renderBarY),ctx.lineTo(boundX2,renderBarY),ctx.stroke(),ctx.fill())}ctx.restore()}ctx.save();var lastData=null;for(index=0;index<content.data.length;++index){var fillColorForIndex=null,strokeColorForIndex=null,v=(null!=content.fillColor?Array.isArray(content.fillColor)?fillColorForIndex=ctx.fillStyle=content.fillColor[index]:ctx.fillStyle=content.fillColor:ctx.fillStyle=options.fillColorBars,null!=content.strokeColor?Array.isArray(content.strokeColor)?strokeColorForIndex=ctx.strokeStyle=content.strokeColor[index]:ctx.strokeStyle=content.strokeColor:ctx.strokeStyle=options.strokeColorBars,content.data[index]),vIsArr=Array.isArray(v),renderStartX=leftXPadding+widthPerBar*index;if(vIsArr&&"stacked"===options.barStyle){for(var runningValue=0,lastHeight=0,drawIndex=0;drawIndex<v.length;++drawIndex){null!=fillColorForIndex&&Array.isArray(fillColorForIndex)&&(ctx.fillStyle=fillColorForIndex[drawIndex]||options.fillColorBars),null!=strokeColorForIndex&&Array.isArray(strokeColorForIndex)&&(ctx.strokeStyle=strokeColorForIndex[drawIndex]||options.strokeColorBars),runningValue+=v[drawIndex];var tSY,tEX,tEY,hint,barPadP,tSX,renderBarHeight=Math.floor(remainingHeight*Helpers.getAxisRatio(minChartValue,maxChartValue,runningValue)),renderUpToY=topYPadding+remainingHeight-renderBarHeight;Math.abs(renderBarHeight-lastHeight)<options.stackedBarPadding+2?lastHeight=renderBarHeight:(barPadP=0<drawIndex?options.stackedBarPadding:0,ctx.beginPath(),ctx.moveTo(tSX=renderStartX+computedBarPadding,tSY=topYPadding+remainingHeight-lastHeight-barPadP),ctx.lineTo(renderStartX+computedBarPadding,renderUpToY),ctx.lineTo(tEX=renderStartX+(widthPerBar-1)-computedBarPadding,tEY=renderUpToY),ctx.lineTo(renderStartX+(widthPerBar-1)-computedBarPadding,topYPadding+remainingHeight-lastHeight-barPadP),0<drawIndex&&ctx.lineTo(tSX,tSY),ctx.stroke(),ctx.fill(),null!=content.hints&&null!=content.hints[index]&&null!=(hint=content.hints[index][drawIndex])&&this.mouseListeners.push(function(index,drawIndex,hint,sx,sy,ex,ey,x,y){var minX=Math.min(sx,ex),sx=Math.max(sx,ex),ex=Math.min(sy,ey),sy=Math.max(sy,ey);return x<minX||sx<x||y<ex||sy<y?null:{index:index,drawIndex:drawIndex,rect:{left:minX,right:sx,top:ex,bottom:sy},text:hint.split("\n")}}.bind(this,index,drawIndex,hint,tSX,tSY,tEX,tEY)),tSY-renderUpToY>1.25*options.fontDataTags&&null!=content.dataTags&&null!=(barPadP=content.dataTags[index])&&null!=(barPadP=barPadP[drawIndex])&&(tSX=ctx.fillStyle,ctx.fillStyle="rgb(0, 0, 0)",ctx.font=Helpers.getFont({weight:options.fontWeight,size:options.fontDataTags,family:options.font}),ctx.textAlign="center",ctx.fillText(barPadP,renderStartX+widthPerBar/2,tSY-.25*options.fontDataTags),ctx.fillStyle=tSX),lastHeight=renderBarHeight)}null!=content.barTooltips&&(ctx.fillStyle="rgb(0, 0, 0)",ctx.font=Helpers.getFont({weight:options.fontWeight,size:options.fontSizeLabels,family:options.font}),ctx.textAlign="center",ctx.fillText(content.barTooltips[index]||"",renderStartX+widthPerBar/2,renderUpToY-3))}else if("line"===options.barStyle){if(vIsArr){for(var rbx=renderStartX+widthPerBar/2,nLData=("background"===options.fillRegion&&(lDu=lastData,null!=(lDu=Array.isArray(lDu)?lDu[0]:lDu))&&(sFS=ctx.fillStyle,ctx.fillStyle=lDu.color,ctx.fillRect(lDu.x,boundY1,rbx-lDu.x,boundY2-boundY1),ctx.fillStyle=sFS),[]),drawIndex=0;drawIndex<v.length;++drawIndex){var rby=topYPadding+remainingHeight-Math.round(remainingHeight*Helpers.getAxisRatio(minChartValue,maxChartValue,v[drawIndex]));null!=lastData&&(tLY=(Array.isArray(lastData)?(tLX=(lastData[drawIndex]||{}).x,lastData[drawIndex]||{}):(tLX=lastData.x,lastData)).y,tLX)&&tLY&&(Array.isArray(strokeColorForIndex)?ctx.strokeStyle=strokeColorForIndex[drawIndex]||options.strokeColorBars:ctx.strokeStyle=strokeColorForIndex||"rgb(0, 0, 0)",ctx.beginPath(),ctx.moveTo(tLX,tLY),ctx.lineTo(rbx,rby),ctx.stroke()),Array.isArray(fillColorForIndex)&&(ctx.fillStyle=fillColorForIndex[drawIndex]||options.fillColorBars),Array.isArray(strokeColorForIndex)&&(ctx.strokeStyle=strokeColorForIndex[drawIndex]||options.strokeColorBars),ctx.beginPath(),ctx.arc(rbx,rby,options.radiusDot,0,2*Math.PI),ctx.stroke(),ctx.fill(),nLData[drawIndex]={x:rbx,y:rby,color:ctx.fillStyle}}lastData=nLData,null!=lDu&&lDu.color!=lastData[0].color&&this.fillRegions.push({x:lastData[0].x,y:lastData[0].y,prev:lDu.color,next:lastData[0].color})}else{var lDu,sFS,key,rbx=renderStartX+widthPerBar/2,rby=topYPadding+remainingHeight-Math.round(remainingHeight*Helpers.getAxisRatio(minChartValue,maxChartValue,v));if("background"===options.fillRegion&&null!=lastData&&(lDu=lastData,Array.isArray(lDu)&&(lDu=lDu[0]),sFS=ctx.fillStyle,ctx.fillStyle=lDu.color,ctx.fillRect(lDu.x,boundY1,rbx-lDu.x,boundY2-boundY1),ctx.fillStyle=sFS),ctx.beginPath(),ctx.arc(rbx,rby,options.radiusDot,0,2*Math.PI),ctx.stroke(),ctx.fill(),null!=lastData)if(Array.isArray(lastData))for(key in lastData)lastData.hasOwnProperty(key)&&(tLX=lastData[key].x,tLY=lastData[key].y,tLX)&&tLY&&(ctx.strokeStyle=strokeColorForIndex||"rgb(0, 0, 0)",ctx.beginPath(),ctx.moveTo(tLX,tLY),ctx.lineTo(rbx,rby),ctx.stroke());else{var tLX=lastData.x,tLY=lastData.y;tLX&&tLY&&(ctx.strokeStyle=strokeColorForIndex||"rgb(0, 0, 0)",ctx.beginPath(),ctx.moveTo(tLX,tLY),ctx.lineTo(rbx,rby),ctx.stroke())}lastData={x:rbx,y:rby,color:ctx.fillStyle},null!=lDu&&lDu.color!=lastData.color&&this.fillRegions.push({x:lastData.x,y:lastData.y,prev:lDu.color,next:lastData.color})}null!=content.balls&&Array.isArray(content.balls)&&index<content.balls.length&&null!=(ball=content.balls[index])&&(ctx.beginPath(),ctx.fillStyle=ball.fill,ctx.strokeStyle=ball.stroke,ctx.arc(rbx,topYPadding+remainingHeight-remainingHeight*Helpers.getAxisRatio(minChartValue,maxChartValue,minChartValue+ball.value),ball.radius,0,2*Math.PI),ctx.stroke(),ctx.fill()),null!=content.hints&&null!=(hint=content.hints[index])&&this.mouseListeners.push(function(index,hint,sx,sy,ex,ey,x,y){var minX=Math.min(sx,ex),sx=Math.max(sx,ex),ex=Math.min(sy,ey),sy=Math.max(sy,ey);return x<minX||sx<x||y<ex||sy<y?null:{index:index,drawIndex:drawIndex,rect:{left:minX,right:sx,top:ex,bottom:sy},text:hint.split("\n")}}.bind(this,index,hint,rbx-1,topYPadding,rbx+1,topYPadding+remainingHeight))}else{vIsArr&&(v=Helpers.avg(v));var wiskerWidth,x_,ball=topYPadding+remainingHeight-Math.round(remainingHeight*Helpers.getAxisRatio(minChartValue,maxChartValue,v));ctx.beginPath(),ctx.moveTo(renderStartX+computedBarPadding,topYPadding+remainingHeight),ctx.lineTo(renderStartX+computedBarPadding,ball),ctx.lineTo(renderStartX+(widthPerBar-1)-computedBarPadding,ball),ctx.lineTo(renderStartX+(widthPerBar-1)-computedBarPadding,topYPadding+remainingHeight),ctx.stroke(),ctx.fill(),"error"===options.barStyle&&0!=(vIsArr=content._data_standard_error[index])&&(vIsArr=Math.round(remainingHeight*Helpers.getAxisRatio(minChartValue,maxChartValue,vIsArr)),ctx.beginPath(),wiskerWidth=Math.round((widthPerBar-2*computedBarPadding)/8),ctx.moveTo((x_=leftXPadding+widthPerBar*index+widthPerBar/2)-wiskerWidth,ball+vIsArr),ctx.lineTo(x_+wiskerWidth,ball+vIsArr),ctx.moveTo(x_,ball+vIsArr),ctx.lineTo(x_,ball-vIsArr),ctx.moveTo(x_-wiskerWidth,ball-vIsArr),ctx.lineTo(x_+wiskerWidth,ball-vIsArr),ctx.stroke()),null!=content.barTooltips&&(ctx.fillStyle="rgb(0, 0, 0)",ctx.font=Helpers.getFont({weight:options.fontWeight,size:options.fontSizeLabels,family:options.font}),ctx.textAlign="center",ctx.fillText(content.barTooltips[index]||"",renderStartX+widthPerBar/2,ball-3))}}if(ctx.restore(),null!=this.currentHint){ctx.save();var bottomYPadding=this.currentHint.rect,hints=this.currentHint.text,boxWidth=(ctx.fillStyle="rgb(0, 0, 0)",ctx.font=Helpers.getFont({weight:options.fontWeight,size:options.fontSizeHint,family:options.font}),ctx.textAlign="left",0);for(index=0;index<hints.length;++index)boxWidth=Math.max(boxWidth,Math.ceil(ctx.measureText(hints[index]).width));var lineHeight=1.5*options.fontSizeHint,boxHeight=hints.length*lineHeight,drawX=bottomYPadding.right+10,drawY=(bottomYPadding.top+bottomYPadding.bottom)/2;for(width<drawX+(boxWidth+=10)&&(drawX=bottomYPadding.left-boxWidth-10),drawY-boxHeight/2<0?drawY=Math.ceil(boxHeight/2)+1:height<drawY+boxHeight/2&&(drawY=height-boxHeight/2-1),ctx.clearRect(drawX,drawY-boxHeight/2,boxWidth,boxHeight),ctx.beginPath(),ctx.rect(drawX,drawY-boxHeight/2,boxWidth,boxHeight),ctx.stroke(),index=0;index<hints.length;++index)ctx.fillText(hints[index],drawX+5,drawY-boxHeight/2+options.fontSizeHint+index*lineHeight);ctx.restore()}ctx.translate(.5,.5),this.labelPositions=labelPositions},BarChart}(),void 0!==module&&void 0!==module.exports?module.exports=BarChart:window.BarChart=BarChart},{}],2:[function(require,module,exports){const Chart=require("chartjs");let chart=null;module.exports={init:function(CanvasId,Legend,Data){CanvasId=document.getElementById(CanvasId);let labels=[],values=[];Data&&(labels=Data.map(it=>it.label),values=Data.map(it=>it.value));Data={type:"line",data:{labels:labels,datasets:[{label:Legend,data:values}]}};chart=new Chart(CanvasId,Data)},addData:function(Data){chart.data.labels.push(Data.label),chart.data.datasets.forEach(dataset=>dataset.data.push(Data.value)),chart.update()}}},{chartjs:1}]},{},[2])(2)});
